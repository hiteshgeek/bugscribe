/* Bugscribe button styles - per-instance and themeable via CSS variables.
   This file contains only button-related visual rules. JS sets CSS variables
   on the element for per-instance overrides (position, colors, z-index).
*/

.bug-btn-wrapper {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  /* compact default padding so wrapper width is small (just main button) */
  padding: 0.25rem 0.5rem;
  border: none;
  border-radius: 999px;
  font-size: 0.95rem;
  line-height: 1;
  cursor: pointer;
  background-color: var(--bs-btn-bg);
  color: var(--bs-btn-color);
  z-index: var(--bs-btn-z);
  box-shadow: 0 6px 18px rgba(0, 0, 0, 0.12);
  transition: transform 120ms ease, opacity 120ms ease;

  /* default fixed positioning using CSS variables */
  position: fixed;
  top: var(--bs-pos-top);
  right: var(--bs-pos-right);
  bottom: var(--bs-pos-bottom);
  left: var(--bs-pos-left);

  overflow: hidden;
}

/* Allow JS to disable fixed positioning by setting data-fixed="false" */
.bug-btn-wrapper[data-fixed="false"] {
  position: static;
  top: auto;
  right: auto;
  bottom: auto;
  left: auto;
}

.bug-btn-wrapper.hidden {
  opacity: 0;
  pointer-events: none;
  transform: translateY(6px) scale(0.98);
}

// .bug-btn:active {
//   transform: translateY(1px) scale(0.99);
// }

@media (max-width: 420px) {
  .bug-btn-wrapper {
    padding: 0.45rem 0.65rem;
    font-size: 0.92rem;
  }
}

/* Styles for the interactive main button inside the wrapper. We add
   a small utility class (`btn`) to make baseline button styling simple
   and consistent with the wrapper (inherits colors). */
.bug-btn__main.bug-btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 0.4rem;
  padding: 0.45rem 0.65rem;
  border-radius: 999px;
  background: transparent;
  color: inherit;
  border: none;
  font-weight: 600;
  cursor: pointer;
  transition: background-color 120ms ease, transform 120ms ease,
    opacity 120ms ease;
  position: relative;
  z-index: 2;
}

.bug-btn__main.bug-btn:active {
  transform: translateY(1px);
}

.bug-btn__main.bug-btn:focus {
  outline: 3px solid rgba(255, 255, 255, 0.12);
  outline-offset: 2px;
}

@media (max-width: 420px) {
  .bug-btn__main.bug-btn {
    padding: 0.35rem 0.5rem;
  }
}

/* Expanded state: give extra right padding so action buttons fit inside */
.bug-btn-wrapper.expanded {
  box-shadow: 0 10px 28px rgba(0, 0, 0, 0.14);
  padding-right: 5rem;
  padding-left: 0.9rem;
}

/* Actions group that sits beside the main button. These are icon-only
   buttons (no visible text). JS may create them; styles are provided here
   so they look consistent inside the wrapper. */
/* Actions container: absolutely positioned so it does not affect the
   wrapper's width when hidden. It sits to the right of the main button
   and slides in when the wrapper becomes `.expanded`. */
.bug-btn-actions {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  position: absolute;
  /* collapsed: sit just to the right of the pill */
  left: 100%;
  top: 50%;
  transform: translateY(-50%) translateX(6px);
  opacity: 0;
  pointer-events: none;
  transition: opacity 180ms cubic-bezier(0.2, 0.9, 0.2, 1),
    transform 180ms cubic-bezier(0.2, 0.9, 0.2, 1), right 180ms ease,
    left 180ms ease;
  z-index: 3;
}

/* When expanded, bring the actions inside the pill on the right side. */
.bug-btn-wrapper.expanded .bug-btn-actions {
  opacity: 1;
  left: auto;
  right: 0.6rem;
  transform: translateY(-50%) translateX(0);
  pointer-events: auto;
}

.bug-btn__action.bug-btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 2.1rem;
  height: 2.1rem;
  padding: 0;
  border-radius: 999px;
  background: #fff;
  color: #333;
  border: none;
  cursor: pointer;
  font-size: 1.05rem;
  transition: background-color 120ms ease, transform 120ms ease,
    opacity 120ms ease;
  position: relative;
  z-index: 3;
}

.bug-btn__action.bug-btn:active {
  transform: translateY(1px);
}

/* Icon-only: prefer pseudo-elements so authors can omit text labels,
   but if text is present we visually hide it while keeping it available
   to screen readers (expecting markup to include a visually-hidden span). */
.bug-btn__action.bug-btn::before {
  /* removed: we now insert real SVG icons from helpers.js */
  display: none;
}

/* SVG sizing inside action buttons */
.bug-btn__action .bug-btn__icon svg {
  width: 1.05rem;
  height: 1.05rem;
  display: block;
}

/* main button icon sizing */
.bug-btn__main .bug-btn__icon svg {
  width: 1.05rem;
  height: 1.05rem;
  display: block;
}

/* visually-hidden helper for accessible labels inside the button */
.visually-hidden,
.sr-only {
  position: absolute !important;
  width: 1px !important;
  height: 1px !important;
  padding: 0 !important;
  margin: -1px !important;
  overflow: hidden !important;
  clip: rect(0, 0, 0, 0) !important;
  white-space: nowrap !important;
  border: 0 !important;
}

@media (max-width: 420px) {
  .bug-btn__action.bug-btn {
    width: 1.9rem;
    height: 1.9rem;
    font-size: 1rem;
  }
}
